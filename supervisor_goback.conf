[program:gaming]
# Configuration Supervisor pour Gaming Backend
# À placer dans: /etc/supervisor/conf.d/gaming.conf

command=/home/gobackma/venv/bin/gunicorn config.wsgi:application -c /home/gobackma/goback_backend/gunicorn_config.py
directory=/home/gobackma/goback_backend
user=gobackma
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/home/gobackma/logs/supervisor_gaming.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
stderr_logfile=/home/gobackma/logs/supervisor_gaming_error.log
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=10

# Variables d'environnement
environment=
    PATH="/home/gobackma/venv/bin",
    DJANGO_SETTINGS_MODULE="config.settings",
    PYTHONPATH="/home/gobackma/goback_backend"

# Temps d'arrêt gracieux
stopwaitsecs=60
stopsignal=TERM

# Redémarrage automatique en cas de crash
startretries=3
exitcodes=0,2

# Priority (plus bas = démarre en premier)
priority=999
