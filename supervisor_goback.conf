[program:goback]
# Configuration Supervisor pour Goback Backend
# À placer dans: /etc/supervisor/conf.d/goback.conf

command=/home/gobagma/venv/bin/gunicorn config.wsgi:application -c /home/gobagma/goback_backend/gunicorn_config.py
directory=/home/gobagma/goback_backend
user=gobagma
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/home/gobagma/logs/supervisor_goback.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
stderr_logfile=/home/gobagma/logs/supervisor_goback_error.log
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=10

# Variables d'environnement
environment=
    PATH="/home/gobagma/venv/bin",
    DJANGO_SETTINGS_MODULE="config.settings",
    PYTHONPATH="/home/gobagma/goback_backend"

# Temps d'arrêt gracieux
stopwaitsecs=60
stopsignal=TERM

# Redémarrage automatique en cas de crash
startretries=3
exitcodes=0,2

# Priority (plus bas = démarre en premier)
priority=999
